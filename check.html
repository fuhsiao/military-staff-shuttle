<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>訓員專車統計小幫手</title>
</head>
<body>
    <p>專車收費</p>
	<textarea class="statistics-input" placeholder="貼上專車統計結果"></textarea>
	<div class="check-list">
	</div>
    <a href="index.html">回主頁</a>
	<script>
		const checkBlock = document.querySelector(".check-list")
		const inputBlock = document.querySelector(".statistics-input")

		inputBlock.addEventListener('input', function() {
			let data = inputBlock.value
			stationInfoSpilt(data)
		})

		function stationInfoSpilt(data) {
            checkBlock.textContent = ''
			let list = data.split('==================')[0].split('\n')
            for(let i = 0; i < list.length; i++){
                if(list[i] == '') continue;
                let info = list[i].split(':');
                let station = info[0].match('[^(]*')[0];
                let staff = info[1].split(',');
                checkBlock.innerHTML += `${station} <br>`
                
                staff.forEach(function(value, index) {
                    checkBlock.innerHTML += `<input type='checkbox'> ${value}`
                    if (index == staff.length -1){
                        checkBlock.innerHTML +=`<br><br>`
                    }
                });

            }
        }
	</script>
</body>
</html>